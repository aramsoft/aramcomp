<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aramframework.com.ssi.syi.sim.service.SystemCntcMapper">

     <select id="selectSystemCntcList" resultType="egovMap">
        /* 구현 Sql */
        <![CDATA[
            SELECT CNTC_ID
                 , CNTC_NM
                 , CONFM_AT
              FROM COMTN_SYSTEM_CNTC
             WHERE 1 = 1
        ]]>
      	<if test='searchKeyword != null and searchKeyword != ""'>
        <choose>
            <when test='searchCondition == "CNTC_NM"'>
                 <![CDATA[ AND CNTC_NM LIKE '%'|| #{searchKeyword} ||'%' ]]>
            </when>
        </choose>
		</if>
         /* 구현 Sql */
        <![CDATA[
 			LIMIT  #{recordPerPage} OFFSET #{firstIndex}
        ]]>			
    </select>

    <select id="selectSystemCntcListCnt" resultType="int">
        <![CDATA[
            SELECT COUNT(*) totcnt
              FROM COMTN_SYSTEM_CNTC
             WHERE 1 = 1
        ]]>
      	<if test='searchKeyword != null and searchKeyword != ""'>
        <choose>
            <when test='searchCondition == "CNTC_NM"'>
                 <![CDATA[ AND CNTC_NM LIKE '%'|| #{searchKeyword} ||'%' ]]>
            </when>
        </choose>
		</if>
    </select>

    <select id="selectSystemCntcDetail" resultType="systemCntcVO">
        <![CDATA[
            SELECT CNTC_ID          		AS "cntcId"
                 , CNTC_NM          		AS "cntcNm"
                 , CNTC_TY	        		AS "cntcType"
                 , PROVD_INSTT_ID   		AS "provdInsttId"
                 , PROVD_SYS_ID     		AS "provdSysId"
                 , PROVD_SVC_ID     		AS "provdSvcId"
                 , REQUST_INSTT_ID  		AS "requstInsttId"
                 , REQUST_SYS_ID    		AS "requstSysId"
                 , CONFM_AT         		AS "confmAt"
                 , USE_AT           		AS "useAt"
                 , VALID_BGNDE   			AS "validBeginDe"
                 , VALID_ENDDE      		AS "validEndDe"
              FROM COMTN_SYSTEM_CNTC
             WHERE CNTC_ID = #{cntcId}
        ]]>
    </select>

    <insert id="insertSystemCntc">
        <![CDATA[
            INSERT INTO  COMTN_SYSTEM_CNTC (  
            	   CNTC_ID
                 , CNTC_NM
                 , CNTC_TY
                 , PROVD_INSTT_ID
                 , PROVD_SYS_ID
                 , PROVD_SVC_ID
                 , REQUST_INSTT_ID
                 , REQUST_SYS_ID
                 , CONFM_AT
                 , USE_AT
                 , VALID_BGNDE
                 , VALID_ENDDE
				 , FRST_REGISTER_ID 
				 , FRST_REGIST_PNTTM 
				 , LAST_UPDUSR_ID
				 , LAST_UPDT_PNTTM 
            ) VALUES (  
            	   #{cntcId}
                 , #{cntcNm}
                 , #{cntcType}
                 , #{provdInsttId}
                 , #{provdSysId}
                 , #{provdSvcId}
                 , #{requstInsttId}
                 , #{requstSysId}
                 , #{confmAt}
                 , #{useAt}
                 , #{validBeginDe}
                 , #{validEndDe}
				 , #{frstRegisterId}
				 , sysdate()
				 , #{frstRegisterId} 
				 , sysdate()
            )
        ]]>
    </insert>

    <update id="updateSystemCntc">
        <![CDATA[
            UPDATE COMTN_SYSTEM_CNTC
               SET CNTC_NM           = #{cntcNm}
                 , CNTC_TY           = #{cntcType}
                 , PROVD_INSTT_ID    = #{provdInsttId}
                 , PROVD_SYS_ID      = #{provdSysId}
                 , PROVD_SVC_ID      = #{provdSvcId}
                 , REQUST_INSTT_ID   = #{requstInsttId}
                 , REQUST_SYS_ID     = #{requstSysId}
                 , CONFM_AT          = #{confmAt}
                 , USE_AT            = #{useAt}
                 , VALID_BGNDE       = #{validBeginDe}
                 , VALID_ENDDE       = #{validEndDe}
                 , LAST_UPDUSR_ID    = #{lastUpdusrId}
                 , LAST_UPDT_PNTTM 	 = sysdate()
             WHERE CNTC_ID = #cntcId#
        ]]>
    </update>

    <update id="confirmSystemCntc">
        <![CDATA[
            UPDATE COMTN_SYSTEM_CNTC
               SET CONFM_AT          = #{confmAt}
                 , LAST_UPDUSR_ID    = #{lastUpdusrId}
                 , LAST_UPDT_PNTTM   = sysdate()
             WHERE CNTC_ID = #{cntcId}
        ]]>
    </update>

    <delete id="deleteSystemCntc">
        <![CDATA[
            DELETE
              FROM COMTN_SYSTEM_CNTC
             WHERE CNTC_ID = #{cntcId}
        ]]>
    </delete>

</mapper>