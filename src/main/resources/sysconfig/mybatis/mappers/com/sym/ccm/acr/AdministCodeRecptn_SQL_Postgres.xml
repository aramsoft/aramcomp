<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aramframework.com.sym.ccm.acr.dao.AdministCodeRecptnMapper">

	<!-- 목록조회  -->
    <select id="selectAdministCodeRecptnList" resultType="egovMap">
        /* 구현 Sql */
        <![CDATA[
            SELECT ADMINIST_ZONE_SE			
                 , ADMINIST_ZONE_CODE		
                 , OCCRRNC_DE				
                 , OPERT_SN					
                 , CHANGE_SE_CODE			
                 , PROCESS_SE				
                 , ADMINIST_ZONE_NM			
                 , LOWEST_ADMINIST_ZONE_NM	
                 , CTPRVN_CODE				
                 , SIGNGU_CODE				
                 , EMD_CODE					
                 , LI_CODE					
                 , CREAT_DE					
                 , ABL_DE					
                 , ABL_ENNC					
              FROM COMTH_ADMINIST_CODE_LOG
             WHERE 1 = 1
        ]]>
     	<if test='searchKeyword != null and searchKeyword != ""'>
            <if test='searchCondition == "ADMINIST_ZONE_NM"'>
				<![CDATA[ AND ADMINIST_ZONE_NM LIKE '%'||#{searchKeyword}||'%']]>
            </if>
		</if>
        <if test='searchCondition == "CodeList"'>
				<![CDATA[
                   AND ADMINIST_ZONE_SE     = #{administZoneSe}
                   AND ADMINIST_ZONE_CODE   = #{administZoneCode}
               ]]>    
        </if>        
        /* 구현 Sql */
        <![CDATA[
 			LIMIT  #{recordPerPage} OFFSET #{firstIndex}
        ]]>			
    </select>

	<!-- 목록조회_게시물 총갯수  -->
    <select id="selectAdministCodeRecptnListCnt" resultType="int">
        <![CDATA[
            SELECT COUNT(*) totcnt
              FROM COMTH_ADMINIST_CODE_LOG
             WHERE 1 = 1
        ]]>
     	<if test='searchKeyword != null and searchKeyword != ""'>
            <if test='searchCondition == "ADMINIST_ZONE_NM"'>
				<![CDATA[ AND ADMINIST_ZONE_NM LIKE '%'||#{searchKeyword}||'%']]>
            </if>
		</if>
        <if test='searchCondition == "CodeList"'>
				<![CDATA[
                   AND ADMINIST_ZONE_SE     = #{administZoneSe}
                   AND ADMINIST_ZONE_CODE   = #{administZoneCode}
               	]]>    
        </if>        
    </select>

	<!-- 상세보기 -->
    <select id="selectAdministCodeDetail" resultType="administCodeRecptnVO">
        <![CDATA[
            SELECT ADMINIST_ZONE_SE        	AS "administZoneSe"
                 , ADMINIST_ZONE_CODE      	AS "administZoneCode"
                 , ADMINIST_ZONE_NM        	AS "administZoneNm"
                 , UPPER_ADMINIST_ZONE_CODE AS "upperAdministZoneCode"
                 , CREAT_DE                	AS "creatDe"
                 , ABL_DE                  	AS "ablDe"
                 , USE_AT             		AS "useAt"
              FROM COMTC_ADMINIST_CODE
             WHERE ADMINIST_ZONE_SE   = #{administZoneSe}
               AND ADMINIST_ZONE_CODE = #{administZoneCode}
        ]]>
    </select>

	<!-- 입력 -->
    <insert id="insertAdministCodeRecptn">
        <![CDATA[
            INSERT INTO  COMTH_ADMINIST_CODE_LOG (  
            	   OCCRRNC_DE
                 , ADMINIST_ZONE_SE
                 , ADMINIST_ZONE_CODE
                 , OPERT_SN
                 , CHANGE_SE_CODE
                 , PROCESS_SE
                 , ADMINIST_ZONE_NM
                 , LOWEST_ADMINIST_ZONE_NM
                 , CTPRVN_CODE
                 , SIGNGU_CODE
                 , EMD_CODE
                 , LI_CODE
                 , CREAT_DE
                 , ABL_DE
                 , ABL_ENNC
                 , FRST_REGISTER_ID
                 , FRST_REGIST_PNTTM
                 , LAST_UPDUSR_ID
                 , LAST_UPDT_PNTTM
            ) VALUES (  
            	   #{occrrDe}
                 , #{administZoneSe}
                 , #{administZoneCode}
                 , #{opertSn}
                 , #{changeSeCode}
                 , #{processSe}
                 , #{administZoneNm}
                 , #{lowestAdministZoneNm}
                 , #{ctprvnCode}
                 , #{signguCode}
                 , #{emdCode}
                 , #{liCode}
                 , #{creatDe}
                 , #{ablDe}
                 , #{ablEnnc}
				 , #{frstRegisterId}
				 , now()
				 , #{frstRegisterId} 
				 , now()
            )
        ]]>
    </insert>

	<!-- 입력(코드값) -->
    <insert id="insertAdministCode">
        <![CDATA[
            INSERT INTO  COMTC_ADMINIST_CODE (  
            	   ADMINIST_ZONE_SE
                 , ADMINIST_ZONE_CODE
                 , ADMINIST_ZONE_NM
                 , UPPER_ADMINIST_ZONE_CODE
                 , CREAT_DE
                 , ABL_DE
                 , USE_AT
                 , FRST_REGISTER_ID
                 , FRST_REGIST_PNTTM
                 , LAST_UPDUSR_ID
                 , LAST_UPDT_PNTTM
            ) VALUES (  
            	   #{administZoneSe}
                 , #{administZoneCode}
                 , #{administZoneNm}
                 , #{upperAdministZoneCode}
                 , #{creatDe}
                 , #{ablDe}
                 , #{useAt}
                 , #{frstRegisterId}
                 , now()
                 , #{frstRegisterId}
                 , now()
            )
        ]]>
    </insert>

	<!-- 수정(코드값) -->
    <update id="updateAdministCode">
        <![CDATA[
            UPDATE COMTC_ADMINIST_CODE
               SET ADMINIST_ZONE_SE            = #{AdministZoneSe}
                 , ADMINIST_ZONE_CODE          = #{AdministZoneCode}
                 , ADMINIST_ZONE_NM            = #{AdministZoneNm}
                 , UPPER_ADMINIST_ZONE_CODE    = #{UpperAdministZoneCode}
                 , CREAT_DE                    = #{CreatDe}
                 , ABL_DE                      = #{AblDe}
                 , USE_AT                      = #{useAt}
                 , LAST_UPDUSR_ID              = #{lastUpdusrId}
                 , LAST_UPDT_PNTTM             = now()
             WHERE ADMINIST_ZONE_SE            = #{AdministZoneSe}
               AND ADMINIST_ZONE_CODE          = #{AdministZoneCode}
        ]]>
    </update>

	<!-- 삭제 -->
    <update id="deleteAdministCode">
        <![CDATA[
            UPDATE COMTC_ADMINIST_CODE
               SET ABL_ENNC                    = '1'
                 , ABL_DE                      = #{ablDe}
                 , LAST_UPDUSR_ID              = #{lastUpdusrId}
                 , LAST_UPDT_PNTTM             = now()
             WHERE ADMINIST_ZONE_SE            = #{AdministZoneSe}
               AND ADMINIST_ZONE_CODE          = #{AdministZoneCode}
        ]]>
    </update>

</mapper>