<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aramframework.com.sym.sym.nwk.service.impl.NtwrkMapper">

    <select id="selectNtwrkList" resultType="egovMap">
        /* 구현 Sql */
        <![CDATA[ 
            SELECT NTWRK_ID					AS "ntwrkId"
                 , NTWRK_IP					AS "ntwrkIp"
                 , (SELECT CD.CODE_NM
                      FROM COMTC_CMMN_DETAIL_CODE CD
                     WHERE CD.CODE_ID = 'COM067'
                       AND MANAGE_IEM = CD.CODE
                   ) 						AS "manageIem"
                 , USER_NM					AS "userNm"
                 , USE_AT					AS "useAt"
                 , RGSDE			        AS "regstYmd"
              FROM COMTN_NTWRK_INFO
             WHERE 1 = 1
        ]]>                 
       	<if test='strManageIem != null and strManageIem != "00"'>
				<![CDATA[ AND MANAGE_IEM = #{strManageIem}  ]]>
		</if>
       	<if test='strUserNm != null and strUserNm != ""'>
				<![CDATA[ AND USER_NM LIKE '%'||#{strUserNm}||'%' ]]>
		</if>
        <![CDATA[            
             ORDER BY NTWRK_ID
        ]]>             
        /* 구현 Sql */
        <![CDATA[
 			LIMIT  #{recordPerPage} OFFSET #{firstIndex}
        ]]>			
    </select>

    <select id="selectNtwrkListCnt" resultType="int">
        <![CDATA[ 
            SELECT COUNT(*) totcnt
              FROM COMTN_NTWRK_INFO
             WHERE 1 = 1
        ]]>             
       	<if test='strManageIem != null and strManageIem != "00"'>
				<![CDATA[ AND MANAGE_IEM = #{strManageIem}  ]]>
		</if>
       	<if test='strUserNm != null and strUserNm != ""'>
				<![CDATA[ AND USER_NM LIKE '%'||#{strUserNm}||'%' ]]>
		</if>
    </select>
    
    <select id="selectNtwrk" resultType="ntwrkVO">
        <![CDATA[
            SELECT NTWRK_ID
                 , NTWRK_IP
                 , GTWY
                 , SUBNET
                 , DOMN_NM_SERVER			AS "domnServer"
                 , (SELECT CD.CODE_NM
                      FROM COMTC_CMMN_DETAIL_CODE CD
                     WHERE CD.CODE_ID = 'COM067'
                       AND MANAGE_IEM = CD.CODE
                   ) 						AS "manageIem" 
                 , USER_NM
                 , USE_AT
                 , RGSDE					AS "regstYmd"	
                 , FRST_REGIST_PNTTM 		AS "frstRegisterPnttm"
                 , FRST_REGISTER_ID
                 , LAST_UPDT_PNTTM 			AS "lastUpdusrPnttm"
                 , LAST_UPDUSR_ID
              FROM COMTN_NTWRK_INFO
             WHERE 1 = 1
               AND NTWRK_ID = #{ntwrkId}    
        ]]>
    </select>

    <insert id="insertNtwrk" >
        <![CDATA[
             INSERT INTO COMTN_NTWRK_INFO (
             		NTWRK_ID
             	  , NTWRK_IP
             	  , GTWY
             	  , SUBNET
             	  , DOMN_NM_SERVER
             	  , MANAGE_IEM
             	  , USER_NM
             	  , USE_AT
             	  , RGSDE
				  , FRST_REGISTER_ID 
				  , FRST_REGIST_PNTTM 
				  , LAST_UPDUSR_ID
				  , LAST_UPDT_PNTTM 
             ) VALUES (
             		#{ntwrkId}
             	  , #{ntwrkIp}
             	  , #{gtwy}
             	  , #{subnet}
             	  , #{domnServer}
             	  , #{manageIem}
             	  , #{userNm}
             	  , #{useAt}
             	  , #{regstYmd}
				  , #{frstRegisterId}
				  , sysdate()
				  , #{frstRegisterId} 
				  , sysdate()
             )
        ]]>
    </insert>     

    <update id="updateNtwrk" >
        <![CDATA[
            UPDATE COMTN_NTWRK_INFO
               SET NTWRK_IP 		= #{ntwrkIp}
                 , GTWY 			= #{gtwy}
                 , SUBNET 			= #{subnet}
                 , DOMN_NM_SERVER 	= #{domnServer}
                 , MANAGE_IEM 		= #{manageIem}
                 , USER_NM 			= #{userNm}
                 , USE_AT 			= #{useAt}
                 , RGSDE 			= #{regstYmd}
                 , LAST_UPDUSR_ID 	= #{lastUpdusrId}   
                 , LAST_UPDT_PNTTM 	= sysdate()
             WHERE NTWRK_ID = #{ntwrkId}
        ]]>
    </update>    
    
    <delete id="deleteNtwrk" >
        <![CDATA[
            DELETE 
              FROM COMTN_NTWRK_INFO
             WHERE NTWRK_ID = #{ntwrkId}
        ]]>
    </delete>  

</mapper>