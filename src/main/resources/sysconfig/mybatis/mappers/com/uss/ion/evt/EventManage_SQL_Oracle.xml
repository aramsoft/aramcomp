<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aramframework.com.uss.ion.evt.service.impl.EventManageMapper">

   <select id="selectEventManageList" resultType="egovMap" >
		<![CDATA[
            SELECT *
              FROM (
            SELECT ROWNUM RNUM, ALL_LIST.*
              FROM (
        ]]>
        /* 구현 Sql */
       <![CDATA[
		    SELECT EVENT_ID             	AS "eventId"          
		         , EVENT_SE             	AS "eventSe"          
		         , EVENT_NM             	AS "eventNm"          
		         , EVENT_BGNDE       		AS "eventBeginDe"     
		         , EVENT_ENDDE         		AS "eventEndDe"       
		         , EVENT_PLACE          	AS "eventPlace"       
		         , GARDEN               	AS "garden"           
		         , RCEPT_BGNDE       		AS "rceptBeginDe"     
		         , RCEPT_ENDDE          	AS "rceptEndDe"       
		         , to_date(EVENT_ENDDE, 'YYYYMMDD')-to_date(EVENT_BGNDE,'YYYYMMDD')+1 as "eventDayCount" 
		         , (select count(atdrn.APPLCNT_ID) 
		              from COMTN_EVENT_ATDRN atdrn
			         where atdrn.EVENT_ID = A.EVENT_ID
			       ) 						as "eventAtdrnCount"
			     , (select code_nm 
			          from COMTC_CMMN_DETAIL_CODE
			         where code_id ='COM053'
			           and code = A.EVENT_SE
			       ) 						as "eventSeNm"
		      FROM COMTN_EVENT_MANAGE A 
		     WHERE 1=1
        ]]>
     	<if test='searchSe != null and searchSe != ""'>
		    	<![CDATA[ AND EVENT_SE like '%'||#{searchSe}||'%'   ]]>
 		</if>
 	    <choose>
	        <when test='searchMonth != null and searchMonth != ""'>
		   		<![CDATA[ AND #{searchKeyword} BETWEEN SUBSTR(EVENT_BGNDE, 0, 6) AND SUBSTR(EVENT_ENDDE, 0, 6)  ]]>
	       	</when>
	        <otherwise>
		     	<if test='searchYear != null and searchYear != ""'>
				<![CDATA[ AND EVENT_BGNDE like '%'||#{searchKeyword}||'%'    ]]>
		 		</if>
	        </otherwise>
	    </choose>
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
        <![CDATA[
             ORDER BY FRST_REGIST_PNTTM DESC
		]]>				
        /* 구현 Sql */
        <![CDATA[
                   ) ALL_LIST
                   )
             WHERE RNUM BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordPerPage}
        ]]>			
    </select>

    <select id="selectEventManageListCnt" resultType="int">
        <![CDATA[
            SELECT COUNT(*) totcnt
              FROM COMTN_EVENT_MANAGE
             WHERE 1=1
        ]]>
     	<if test='searchSe != null and searchSe != ""'>
		    	<![CDATA[ AND EVENT_SE like '%'||#{searchSe}||'%'   ]]>
 		</if>
 	    <choose>
	        <when test='searchMonth != null and searchMonth != ""'>
		   		<![CDATA[ AND #{searchKeyword} BETWEEN SUBSTR(EVENT_BGNDE, 0, 6) AND SUBSTR(EVENT_ENDDE, 0, 6)  ]]>
	       	</when>
	        <otherwise>
		     	<if test='searchYear != null and searchYear != ""'>
				<![CDATA[ AND EVENT_BGNDE like '%'||#{searchKeyword}||'%'    ]]>
		 		</if>
	        </otherwise>
	    </choose>
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
    </select>
    
    <select id="selectEventManage" resultType="eventManageVO">
        <![CDATA[
			SELECT mge.EVENT_ID             AS "eventId"          
			     , mge.EVENT_SE             AS "eventSe"          
			     , mge.EVENT_NM             AS "eventNm"          
			     , mge.EVENT_PURPS          AS "eventPurps"       
			     , mge.EVENT_BGNDE       	AS "eventBeginDe"     
			     , mge.EVENT_ENDDE         	AS "eventEndDe"       
			     , mge.EVENT_AUSPC_INSTT_NM AS "eventAuspcInsttNm"
			     , mge.EVENT_MNGT_INSTT_NM  AS "eventMngtInsttNm" 
			     , mge.EVENT_PLACE          AS "eventPlace"       
			     , mge.EVENT_CN             AS "eventCn"          
			     , mge.CT_OCCRRNC_AT        AS "ctOccrrncAt"      
			     , mge.PARTCPT_CT           AS "partcptCt"        
			     , mge.GARDEN               AS "garden"           
			     , mge.REFRN_URL            AS "refrnUrl"         
			     , mge.RCEPT_BGNDE       	AS "rceptBeginDe"     
			     , mge.RCEPT_ENDDE         	AS "rceptEndDe"       
			     , to_date(mge.EVENT_ENDDE, 'YYYYMMDD')-to_date(mge.EVENT_BGNDE,'YYYYMMDD')+1  AS "eventDayCount" 
			     , (select count(*) 
			          from COMTN_EVENT_ATDRN a 
			         where a.EVENT_ID = mge.EVENT_ID
			       ) 						AS "eventAtdrnCount"
			     , TRUNC(to_date(mge.RCEPT_BGNDE, 'YYYYMMDD')-SYSDATE)  AS "eventAtdrnDayCount"
			     , (select code_nm 
			     	  from COMTC_CMMN_DETAIL_CODE 
			     	 where code_id ='COM053' 
			     	   and code = mge.EVENT_SE
			       ) 						AS "eventSeNm"
			  FROM COMTN_EVENT_MANAGE mge
			 WHERE EVENT_ID = #{eventId}
        ]]>
    </select>

    <insert id="insertEventManage" >
        <![CDATA[
            INSERT INTO COMTN_EVENT_MANAGE (
            		EVENT_ID            
            	  , EVENT_SE            
            	  , EVENT_NM            
            	  , EVENT_PURPS         
            	  , EVENT_BGNDE      
            	  , EVENT_ENDDE        
            	  , EVENT_AUSPC_INSTT_NM
            	  , EVENT_MNGT_INSTT_NM 
            	  , EVENT_PLACE         
            	  , EVENT_CN            
            	  , CT_OCCRRNC_AT       
            	  , PARTCPT_CT          
            	  , GARDEN              
            	  , REFRN_URL           
            	  , RCEPT_BGNDE      
            	  , RCEPT_ENDDE        
				  , FRST_REGISTER_ID 
				  , FRST_REGIST_PNTTM 
				  , LAST_UPDUSR_ID
				  , LAST_UPDT_PNTTM 
            ) VALUES (
            		#{eventId}           
            	  , #{eventSe}           
            	  , #{eventNm}           
            	  , #{eventPurps}        
            	  , #{eventBeginDe}      
            	  , #{eventEndDe}        
            	  , #{eventAuspcInsttNm} 
            	  , #{eventMngtInsttNm}  
            	  , #{eventPlace}        
            	  , #{eventCn}           
            	  , #{ctOccrrncAt}       
            	  , #{partcptCt}         
            	  , #{garden}            
            	  , #{refrnUrl}          
            	  , #{rceptBeginDe}      
            	  , #{rceptEndDe}        
				  , #{frstRegisterId}
				  , SYSDATE
				  , #{frstRegisterId} 
				  , SYSDATE
            ) 
        ]]>
    </insert>     

    <update id="updateEventManage" >
        <![CDATA[
            UPDATE COMTN_EVENT_MANAGE
               SET EVENT_PURPS          = #{eventPurps}       
                 , EVENT_BGNDE       	= #{eventBeginDe}     
                 , EVENT_ENDDE         	= #{eventEndDe}      
                 , EVENT_AUSPC_INSTT_NM = #{eventAuspcInsttNm}
                 , EVENT_MNGT_INSTT_NM  = #{eventMngtInsttNm} 
                 , EVENT_PLACE          = #{eventPlace}       
                 , EVENT_CN             = #{eventCn}          
                 , CT_OCCRRNC_AT        = #{ctOccrrncAt}      
                 , PARTCPT_CT           = #{partcptCt}        
                 , GARDEN               = #{garden}           
                 , REFRN_URL            = #{refrnUrl}         
                 , RCEPT_BGNDE       	= #{rceptBeginDe}     
                 , RCEPT_ENDDE         	= #{rceptEndDe}       
                 , LAST_UPDUSR_ID       = #{lastUpdusrId}     
                 , LAST_UPDT_PNTTM    	= SYSDATE   
			 WHERE EVENT_ID          	= #{eventId}
			   AND EVENT_SE          	= #{eventSe}
        ]]>
    </update>    
    
    <delete id="deleteEventManage" >
        <![CDATA[
            DELETE 
              FROM COMTN_EVENT_MANAGE
			 WHERE EVENT_ID         = #{eventId}
        ]]>
    </delete>  

<!-- 행사접수 관리 -->

    <select id="selectEventAtdrnList" resultType="egovMap">
		<![CDATA[
            SELECT *
              FROM (
            SELECT ROWNUM RNUM, ALL_LIST.*
              FROM (
        ]]>
        /* 구현 Sql */
       <![CDATA[
			SELECT mge.EVENT_ID             AS "eventId"          
			     , mge.EVENT_SE             AS "eventSe"          
			     , mge.EVENT_NM             AS "eventNm"          
			     , mge.EVENT_BGNDE       	AS "eventBeginDe"     
			     , mge.EVENT_ENDDE         	AS "eventEndDe"       
			     , mge.EVENT_PLACE          AS "eventPlace"       
			     , mge.GARDEN               AS "garden"          
			     , mge.RCEPT_BGNDE       	AS "rceptBeginDe"     
			     , mge.RCEPT_ENDDE         	AS "rceptEndDe"       
			     , to_date(mge.EVENT_ENDDE, 'YYYYMMDD')-to_date(mge.EVENT_BGNDE,'YYYYMMDD')+1 as "eventDayCount" 
			     , (select count(APPLCNT_ID) 
			          from COMTN_EVENT_ATDRN 
				     where EVENT_ID = mge.EVENT_ID
				   ) 						as "eventAtdrnCount"
				 , (select code_nm 
				      from COMTC_CMMN_DETAIL_CODE
				     where code_id ='COM053'
				       and code    = mge.EVENT_SE
				   ) 						as "eventSeNm"
				 , atdrn.APPLCNT_ID         AS "applcntId"        
				 , atdrn.CONFM_AT           AS "confmAt"
			  FROM COMTN_EVENT_MANAGE mge
				   LEFT OUTER JOIN COMTN_EVENT_ATDRN atdrn
				        ON  atdrn.EVENT_ID = mge.EVENT_ID
			 WHERE atdrn.APPLCNT_ID = #{applcntId}
			   AND (TO_CHAR(sysdate, 'YYYYMMDD')  BETWEEN RCEPT_BGNDE  AND RCEPT_ENDDE 
			        or atdrn.confm_At is not null)
        ]]>	 
    	<if test='searchSe != null and searchSe != ""'>
		    	<![CDATA[ AND mge.EVENT_SE like '%'||#{searchSe}||'%'   ]]>
 		</if>
 	    <choose>
	        <when test='searchMonth != null and searchMonth != ""'>
		   		<![CDATA[  AND #{searchKeyword} BETWEEN SUBSTR(mge.EVENT_BGNDE, 0, 6) AND SUBSTR(mge.EVENT_ENDDE, 0, 6)  ]]>
	        </when>
	        <otherwise>
		     	<if test='searchYear != null and searchYear != ""'>
				<![CDATA[ AND mge.EVENT_BGNDE like '%'||#{searchKeyword}||'%'    ]]>
		 		</if>
	        </otherwise>
	    </choose>
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND mge.EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
      	<if test='searchConfmAt != null and searchConfmAt != ""'>
	    <choose>
	        <when test='searchConfmAt == "NON"'>
	            <![CDATA[ AND atdrn.CONFM_AT is null ]]>
	        </when>
	        <when test='searchConfmAt == "A"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	        <when test='searchConfmAt == "C"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	        <when test='searchConfmAt == "R"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	    </choose>
		</if>
        <![CDATA[
             ORDER BY mge.EVENT_ID DESC  
		]]>				
        /* 구현 Sql */
        <![CDATA[
                   ) ALL_LIST
                   )
             WHERE RNUM BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordPerPage}
        ]]>			
    </select>

    <select id="selectEventAtdrnListCnt"  resultType="int">
        <![CDATA[
			SELECT COUNT(*) totcnt
			  FROM COMTN_EVENT_MANAGE mge
			       LEFT OUTER JOIN COMTN_EVENT_ATDRN atdrn
			         	ON 	atdrn.EVENT_ID = mge.EVENT_ID
			 WHERE atdrn.APPLCNT_ID = #{applcntId}
			   AND (TO_CHAR(sysdate, 'YYYYMMDD') BETWEEN RCEPT_BGNDE AND RCEPT_ENDDE 
		            or atdrn.confm_At is not null)
        ]]>	 
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND mge.EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
      	<if test='searchConfmAt != null and searchConfmAt != ""'>
	    <choose>
	        <when test='searchConfmAt == "NON"'>
	            <![CDATA[ AND atdrn.CONFM_AT is null ]]>
	        </when>
	        <when test='searchConfmAt == "A"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	        <when test='searchConfmAt == "C"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	        <when test='searchConfmAt == "R"'>
	            <![CDATA[ AND atdrn.CONFM_AT = #{searchConfmAt} ]]>
	        </when>
	    </choose>
		</if>
    </select>

    <select id="selectEventNmList" resultType="eventManageVO">
        <![CDATA[
			SELECT mge.EVENT_ID             AS "eventId" 
			     , mge.EVENT_NM             AS "eventNm"          
			  FROM COMTN_EVENT_MANAGE mge
			 WHERE EVENT_SE like  '%'||#{eventSe}||'%' 
                  AND #{reqstDe}  BETWEEN SUBSTR(EVENT_BGNDE, 0, 6) AND SUBSTR(EVENT_ENDDE, 0, 6)                 
		     ORDER BY mge.EVENT_ID DESC
        ]]>
    </select>

    <select id="selectEventAtdrn" resultType="eventAtdrnVO">
        <![CDATA[
			SELECT mge.EVENT_ID           	AS "eventId"          
				 , atdrn.INFRML_SANCTN_ID   AS "infrmlSanctnId"   
				 , atdrn.REQST_DE           AS "reqstDe"          
			     , atdrn.APPLCNT_ID         AS "applcntId"        
			     , atdrn.SANCTNER_ID        AS "sanctnerId"      
			     , (select USER_NM 
			          from COMVN_USER_MASTER 
			         where ESNTL_ID = atdrn.APPLCNT_ID
			       )  						AS "applcntNm"
			     , (select info.ORGNZT_NM 
			          from COMVN_USER_MASTER mast
			             , COMTN_ORGNZT_INFO info 
			         where mast.ESNTL_ID   = atdrn.APPLCNT_ID
			           AND mast.ORGNZT_ID = info.ORGNZT_ID
			       )  						AS "orgnztNm"
			     , (select USER_NM 
			          from COMVN_USER_MASTER 
			         where ESNTL_ID = atdrn.SANCTNER_ID
			       ) 						AS "sanctnerNm"
			     , atdrn.CONFM_AT           AS "confmAt"         
			     , atdrn.RETURN_RESN        AS "returnResn"      
			  FROM COMTN_EVENT_MANAGE mge
			     , COMTN_EVENT_ATDRN atdrn
			 WHERE mge.EVENT_ID          = atdrn.EVENT_ID
		       AND atdrn.EVENT_ID        = #{eventId}
		       AND atdrn.APPLCNT_ID      = #{applcntId}
        ]]>
    </select>

    <insert id="insertEventAtdrn" >
        <![CDATA[
            INSERT INTO COMTN_EVENT_ATDRN (
            		 APPLCNT_ID          
            	   , EVENT_ID            
            	   , REQST_DE            
            	   , SANCTNER_ID         
            	   , CONFM_AT            
            	   , INFRML_SANCTN_ID    
				   , FRST_REGISTER_ID 
				   , FRST_REGIST_PNTTM 
				   , LAST_UPDUSR_ID
				   , LAST_UPDT_PNTTM 
            ) VALUES ( 
            		 #{applcntId}        
            	   , #{eventId}           
            	   , #{reqstDe}           
            	   , #{sanctnerId}        
            	   , #{confmAt}           
            	   , #{infrmlSanctnId}   
				   , #{frstRegisterId}
				   , SYSDATE
				   , #{frstRegisterId} 
				   , SYSDATE
            ) 
        ]]>
	</insert>     

    <update id="updateEventAtdrn" >
        <![CDATA[
            UPDATE COMTN_EVENT_ATDRN
               SET CONFM_AT          = #{confmAt}    
                 , SANCTN_DT         = TO_DATE(#{sanctnDt}, 'YYYY-MM-DD HH24:MI:SS')   
                 , RETURN_RESN       = #{returnResn} 
                 , LAST_UPDUSR_ID    = #{lastUpdusrId}
                 , LAST_UPDT_PNTTM 	 = SYSDATE   
			 WHERE APPLCNT_ID     	 = #{applcntId}
			   AND EVENT_ID          = #{eventId}
        ]]>
    </update>    
    
    <delete id="deleteEventAtdrn">
        <![CDATA[
            DELETE 
              FROM COMTN_EVENT_ATDRN
			 WHERE APPLCNT_ID     = #{applcntId}
			   AND EVENT_ID       = #{eventId}
        ]]>
    </delete> 

    <select id="selectEventRceptConfmList" resultType="egovMap">
		<![CDATA[
            SELECT *
              FROM (
            SELECT ROWNUM RNUM, ALL_LIST.*
              FROM (
        ]]>
        /* 구현 Sql */
       	<![CDATA[
			SELECT mge.EVENT_ID             AS "eventId"          
				 , mge.EVENT_SE             AS "eventSe"          
				 , mge.EVENT_NM             AS "eventNm"          
				 , mge.EVENT_BGNDE       	AS "eventBeginDe"     
				 , mge.EVENT_ENDDE         	AS "eventEndDe"       
				 , mge.EVENT_PLACE          AS "eventPlace"       
				 , atdrn.INFRML_SANCTN_ID   AS "infrmlSanctnId"   
				 , atdrn.REQST_DE           AS "reqstDe"          
				 , to_date(mge.EVENT_ENDDE, 'YYYYMMDD')-to_date(mge.EVENT_BGNDE,'YYYYMMDD')+1 as "eventDayCount" 
				 , (select code_nm 
				      from COMTC_CMMN_DETAIL_CODE  
				     WHERE code_id ='COM053' 
				       AND code= mge.EVENT_SE
				   ) 						AS "eventSeNm"
				 , atdrn.APPLCNT_ID         AS "applcntId"       
				 , atdrn.CONFM_AT           AS "confmAt"          
				 , (select USER_NM 
				      from COMVN_USER_MASTER 
				     WHERE ESNTL_ID = atdrn.APPLCNT_ID
				   )  						AS "applcntNm"
				 , TO_CHAR(atdrn.SANCTN_DT, 'YYYY-MM-DD') AS "sanctnDt"  
			  FROM COMTN_EVENT_MANAGE mge
				   LEFT OUTER JOIN COMTN_EVENT_ATDRN atdrn
				        ON   atdrn.EVENT_ID = mge.EVENT_ID
			 WHERE atdrn.SANCTNER_ID = #{sanctnerId}
        ]]>
     	<if test='searchSe != null and searchSe != ""'>
		    	<![CDATA[ AND mge.EVENT_SE like '%'||#{searchSe}||'%'   ]]>
 		</if>
 	    <choose>
	        <when test='searchMonth != null and searchMonth != ""'>
		   		<![CDATA[ AND #{searchKeyword} BETWEEN SUBSTR(mge.EVENT_BGNDE, 0, 6) AND SUBSTR(mge.EVENT_ENDDE, 0, 6)  ]]>
	        </when>
	        <otherwise>
		     	<if test='searchYear != null and searchYear != ""'>
				<![CDATA[ AND mge.EVENT_BGNDE like '%'||#{searchKeyword}||'%'    ]]>
		 		</if>
	        </otherwise>
	    </choose>
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND mge.EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
        <![CDATA[
         	ORDER BY mge.EVENT_ID DESC
		]]>				
        /* 구현 Sql */
        <![CDATA[
                   ) ALL_LIST
                   )
             WHERE RNUM BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordPerPage}
        ]]>			
    </select>

    <select id="selectEventRceptConfmListCnt" resultType="int">
        <![CDATA[
			SELECT COUNT(*) totcnt
			  FROM COMTN_EVENT_MANAGE mge
				   LEFT OUTER JOIN COMTN_EVENT_ATDRN atdrn
				        ON   atdrn.EVENT_ID = mge.EVENT_ID
			 WHERE atdrn.SANCTNER_ID = #{sanctnerId}
        ]]>
     	<if test='searchSe != null and searchSe != ""'>
		    	<![CDATA[ AND mge.EVENT_SE like '%'||#{searchSe}||'%'   ]]>
 		</if>
 	    <choose>
	        <when test='searchMonth != null and searchMonth != ""'>
		   		<![CDATA[ AND #{searchKeyword} BETWEEN SUBSTR(mge.EVENT_BGNDE, 0, 6) AND SUBSTR(mge.EVENT_ENDDE, 0, 6)  ]]>
	        </when>
	        <otherwise>
		     	<if test='searchYear != null and searchYear != ""'>
				<![CDATA[ AND mge.EVENT_BGNDE like '%'||#{searchKeyword}||'%'    ]]>
		 		</if>
	        </otherwise>
	    </choose>
      	<if test='searchNm != null and searchNm != ""'>
		    	<![CDATA[ AND mge.EVENT_NM like '%'||#{searchNm}||'%'   ]]>
 		</if>
    </select>

    <select id="selectEventReqstAtdrnList" resultType="egovMap">
		<![CDATA[
            SELECT *
              FROM (
            SELECT ROWNUM RNUM, ALL_LIST.*
              FROM (
        ]]>
        /* 구현 Sql */
       	<![CDATA[
			select mas.user_nm    			as "userNm"
			     , (select orgnzt_nm  
			          from COMTN_ORGNZT_INFO 
			         where orgnzt_ID = mas.orgnzt_ID
			       ) 						AS "orgnztNm"
			     , mas.user_email 			as "userEmail"
			     , atd.confm_at   			as "confmAt"
			  from COMTN_EVENT_ATDRN atd
			     , COMVN_USER_MASTER mas
			 where atd.applcnt_ID = ESNTL_ID
			   and atd.EVENT_ID = #{eventId}
			 ORDER BY atd.EVENT_ID DESC
		]]>				
        /* 구현 Sql */
        <![CDATA[
                   ) ALL_LIST
                   )
             WHERE RNUM BETWEEN #{firstIndex} + 1 AND #{firstIndex} + #{recordPerPage}
        ]]>			
    </select>

    <select id="selectEventReqstAtdrnListCnt" resultType="int">
        <![CDATA[
	        SELECT COUNT(*) totcnt
			  from COMTN_EVENT_ATDRN atd
			     , COMVN_USER_MASTER mas
			 where atd.applcnt_ID = ESNTL_ID
			   and atd.EVENT_ID = #{eventId} 
	    ]]>
    </select>
    
</mapper>