<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aramframework.com.uss.ion.tir.service.TwitterMapper">

	<!-- 트위터::개정설정 검색 -->
	<select id="selectTwitterAccount" resultType="egovMap">
		<![CDATA[
			SELECT USER_ID 					USID
			     , CNSMR_KEY				CONSUMER_KEY
			     , CNSMR_SECRET				CONSUMER_SECRET
			     , FRST_REGISTER_ID
			     , FRST_REGIST_PNTTM
			     , LAST_UPDUSR_ID
			     , LAST_UPDT_PNTTM
			  FROM COMTN_TWITTER
			 WHERE USER_ID = #{usid}
		]]>
	</select>
	
	<!-- 트위터::개정설정 체크 -->
	<select id="selectTwitterAccountCheck" resultType="int">
		<![CDATA[
			SELECT COUNT(USER_ID) CNT
			  FROM COMTN_TWITTER
			 WHERE USER_ID = #{usid}
		]]>
	</select>
	
	<!-- 트위터::개정설정 Insert -->
	<insert id="insertTwitterAccount">
		<![CDATA[
			INSERT INTO COMTN_TWITTER (
					USER_ID
				  ,	CNSMR_KEY
				  ,	CNSMR_SECRET
				  ,	FRST_REGISTER_ID
				  ,	FRST_REGIST_PNTTM
				  ,	LAST_UPDUSR_ID
				  ,	LAST_UPDT_PNTTM
			) VALUES (
					#{usid}
				  ,	#{consumerKey}
				  ,	#{consumerSecret}
				  , #{frstRegisterId}
				  , sysdate()
				  , #{frstRegisterId} 
				  , sysdate()
			)
		]]>
	</insert>
	
	<!-- 트위터::개정설정 업데이트 -->
	<update id="updateTwitterAccount">
		<![CDATA[
			UPDATE COMTN_TWITTER 
			   SET CNSMR_KEY		= #{consumerKey}
			     , CNSMR_SECRET		= #{consumerSecret}
			     , LAST_UPDUSR_ID 	= #{lastUpdusrId}
			     , LAST_UPDT_PNTTM 	= sysdate()
			 WHERE USER_ID = #{usid}
		]]>
	</update>
	
	<!-- 트위터::계정설정 삭제 -->
	<delete id="deleteTwitterAccount">
		<![CDATA[
			DELETE 
			  FROM COMTN_TWITTER 
			 WHERE USER_ID = #{usid}
		]]>
	</delete>
	
</mapper>